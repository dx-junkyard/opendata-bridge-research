**Gemini Pro Visionでの実行結果**

以下PDFをGemini Pro Visionで読み込み。[Google AI Studio](https://makersuite.google.com/)からGemini Visionを利用。  

- [東京都統計年鑑 昭和53年](https://www.toukei.metro.tokyo.lg.jp/tnenkan/1978/tn78qyti0510b.htm)
  - 低画質、文字列も低品質

> [!NOTE]
> 以下issueのGemini Pro Visionでやり取りした内容をこちらのreadmeに登録  
> https://github.com/dx-junkyard/opendata-bridge-research/issues/3

> [!NOTE]
> 工夫した点や気づき事項は以下です。
>   - 23区の画像を12区と11区で2回に分けて読み込ませ、1回で読み込むテーブルの数を減らした。
>   - 「縦方向は区の数とし12個を出力ください。」として、縦方向についても数を明確にプロンプトに記載した。  
>   - 境界未定地が埼玉県となったり、明らかに間違えるため 「最後の行は境界未定地のため、人口が"-"となっています。」とプロンプトに追加した。
>   - プロンプト1に引き続き、プロンプト2を入力したところ、プロンプト1で出力したリストを自動でプロンプト2へ反映して、出力しました。
>   - 影響があるかわからないが、パラメータをTemperature: 0.1、Top P: 1とし、出力の一貫性を求めつつ、それでいてあらゆる可能性を排除しないようにしました。Temperatureなどのパラメータはもっと色々試して、適正値を探す必要があるかもしれません。[TemperatureとTop Pについて](https://techblog.a-tm.co.jp/entry/2023/04/24/181232)

■抽出結果（５枚目の区部のみが対象）  

[区部_その1]  

プロンプト  

```
この画像に示す1962年から1967年までの区部毎の地域別人口を把握し、マークダウン形式で出力します。
なお横方向は1962年から1967年までの年、縦方向は区の数とし12個を出力ください。
```

![区部_プロンプト2](https://github.com/dx-junkyard/opendata-bridge-research/blob/main/GCP-Gemini/data/gemini_pro_vision/vision_popu_propmt3.png?raw=true)

出力結果

```
 | 区 | 1962年 | 1963年 | 1964年 | 1965年 | 1966年 | 1967年 |
|---|---|---|---|---|---|---|
| 千代田区 | 108,880 | 105,056 | 98,033 | 93,624 | 89,624 | 87,207 |
| 中央区 | 147,805 | 141,376 | 134,027 | 128,024 | 124,387 | 119,790 |
| 港区 | 259,918 | 254,155 | 247,757 | 241,861 | 236,571 | 232,744 |
| 新宿区 | 418,183 | 418,104 | 413,699 | 413,910 | 408,403 | 404,493 |
| 文京区 | 260,649 | 258,386 | 255,906 | 253,449 | 250,251 | 247,024 |
| 台東区 | 302,838 | 302,569 | 293,343 | 286,324 | 276,151 | 269,299 |
| 墨田区 | 330,506 | 327,458 | 321,324 | 317,630 | 311,299 | 305,933 |
| 江東区 | 363,585 | 365,634 | 363,585 | 359,672 | 352,582 | 345,635 |
| 品川区 | 429,022 | 429,826 | 426,909 | 423,278 | 410,981 | 401,193 |
| 目黒区 | 298,932 | 298,607 | 298,774 | 298,744 | 296,694 | 297,095 |
| 大田区 | 736,458 | 746,568 | 752,999 | 755,355 | 752,959 | 751,617 |
| 世田谷区 | 689,745 | 706,539 | 723,555 | 742,880 | 751,617 | 764,598 |
```

出力結果のスクリーンショット  

![区部_出力結果](https://github.com/dx-junkyard/opendata-bridge-research/blob/main/GCP-Gemini/data/gemini_pro_vision/vision_popu_out3.png?raw=true)



[区部_その2]  

プロンプト　　

```
この画像に示す1962年から1967年までの区部毎の地域別人口を把握し、マークダウン形式で出力します。
なお横方向は1962年から1967年までの年、縦方向は区の数とし12個を出力ください。
最後の行は境界未定地のため、人口が"-"となっています。
```

![市部_プロンプト](https://github.com/dx-junkyard/opendata-bridge-research/blob/main/GCP-Gemini/data/gemini_pro_vision/vision_popu_propmt4.png?raw=true)

出力結果
```
| 区 | 1962年 | 1963年 | 1964年 | 1965年 | 1966年 | 1967年 |
|---|---|---|---|---|---|---|
| 千代田区 | 108,880 | 105,056 | 98,033 | 93,624 | 89,624 | 87,207 |
| 中央区 | 147,805 | 141,376 | 134,027 | 128,024 | 124,387 | 119,790 |
| 港区 | 259,918 | 254,155 | 247,757 | 241,861 | 236,571 | 232,744 |
| 新宿区 | 418,183 | 418,104 | 413,699 | 413,910 | 408,403 | 404,493 |
| 文京区 | 260,649 | 258,386 | 255,906 | 253,449 | 250,251 | 247,024 |
| 台東区 | 302,838 | 302,569 | 293,343 | 286,324 | 276,151 | 269,299 |
| 墨田区 | 330,506 | 327,458 | 321,324 | 317,630 | 311,299 | 305,933 |
| 江東区 | 363,585 | 365,634 | 363,585 | 359,672 | 352,582 | 345,635 |
| 品川区 | 429,022 | 429,826 | 426,909 | 423,278 | 410,981 | 401,193 |
| 目黒区 | 298,932 | 298,607 | 298,774 | 298,744 | 296,694 | 297,095 |
| 大田区 | 736,458 | 746,568 | 752,999 | 755,355 | 752,959 | 751,617 |
| 世田谷区 | 689,745 | 706,539 | 723,555 | 742,880 | 751,617 | 764,598 |
| 渋谷区 | 286,580 | 283,730 | 282,850 | 283,398 | 284,158 | 282,479 |
|中野区 | 369,196 | 373,789 | 373,653 | 376,697 | 374,444 | 372,367 |
| 杉並区 | 510,067 | 520,381 | 527,635 | 536,792 | 538,987 | 544,617 |
| 豊島区 | 373,140 | 373,946 | 373,844 | 373,126 | 366,778 | 361,686 |
| 北区 | 441,701 | 449,214 | 449,633 | 452,064 | 448,685 | 445,653 |
| 荒川区 | 283,683 | 285,334 | 282,233 | 278,412 | 273,446 | 267,713 |
| 板橋区 | 443,162 | 455,002 | 467,358 | 477,007 | 475,859 | 479,096 |
| 練馬区 | 356,507 | 382,398 | 409,646 | 434,721 | 457,655 | 479,705 |
| 足立区 | 443,558 | 464,313 | 486,576 | 514,736 | 525,860 | 527,562 |
| 葛飾区 | 406,034 | 419,462 | 433,723 | 446,040 | 453,646 | 457,573 |
| 江戸川区 | 346,139 | 367,000 | 385,281 | 405,365 | 417,700 | 427,876 |
| 境界未定地 | - | - | - | - | - | - |
```

出力結果のスクリーンショット  

![市部_出力結果](https://github.com/dx-junkyard/opendata-bridge-research/blob/main/GCP-Gemini/data/gemini_pro_vision/vision_popu_out4.png?raw=true)
